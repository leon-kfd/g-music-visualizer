var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,s=(e,s)=>{for(var c in s||(s={}))r.call(s,c)&&n(e,c,s[c]);if(t)for(var c of t(s))a.call(s,c)&&n(e,c,s[c]);return e};import{r as c,C as i,R as o,l as u,c as l,a as d}from"./vendor.37d9fc5b.js";const h=new window.AudioContext;var f="_wrapper_1j8g3_1";function p(e,t=5,r=.8){if(t<3||t>13||t%2==0)throw new Error("num value muse be singular, num >= 3, num <= 13");return e.map(((a,n)=>{const s=(t-1)/2-n%t,c=e[n+s];return~~(c?c*r**Math.abs(s):a)}))}function m(e,t){"#"===e[0]&&(e=e.slice(1));const r=parseInt(e,16);return`rgba(${r>>16}, ${255&r}, ${r>>8&255}, ${t})`}function y(e,t,r){return`M ${e-r}, ${t}\n  a ${r}, ${r} 0 1, 0 ${2*r}, 0 \n  a ${r}, ${r} 0 1, 0 ${2*-r}, 0`}function x(e){const t="#e9dcf7",r=c.exports.useRef(),a=c.exports.useRef([]);return c.exports.useEffect((()=>{if(e.data){(function(e){return p([...e].reduce(((e,t,r)=>(r%2&&e.push(t),e)),[]))})(e.data).map(((e,t)=>{a.current[t].attr("height",e*e/65025*50+4)}))}}),[e.freshTime]),c.exports.useEffect((()=>{r.current=new i({container:"SLine",width:400,height:400}),r.current.addShape("circle",{attrs:{x:200,y:200,r:100,fill:"#f5f5f7",shadowColor:t,shadowBlur:10}}),a.current=Array.from({length:64},((e,a)=>{const n=5.625*a-150,s=Math.cos(n*Math.PI/180),c=Math.sin(n*Math.PI/180),i=110;return r.current.addShape("rect",{attrs:{width:4,height:4,radius:2,x:200+s*i-2,y:200+c*i-2,fill:t}}).rotateAtPoint(200+s*i,200+c*i,(n-90)*Math.PI/180)}))}),[]),o.createElement("div",{className:"s-model"},o.createElement("div",{id:"SLine",className:"s-canvas-wrapper"}))}function g(e){const t=["#e9dcf7","#cdd9f5","#cdf5dd","#f3dfbb"],r=c.exports.useRef(),a=c.exports.useRef([]);function n(e,t=0){const r=5.625*e-150,a=110+t;return[200+Math.cos(r*Math.PI/180)*a,200+Math.sin(r*Math.PI/180)*a]}return c.exports.useEffect((()=>{if(e.data){const t=[[],[],[],[]];(function(e){let t=[];return[...e].map(((e,r)=>{r%2&&t.push(e)})),p(t,5,.75)})(e.data).map(((e,r)=>{t[r%4].push(n(r,e*e/65025*50+4))})),t.map(((e,t)=>{const r=u().x((e=>e[0])).y((e=>e[1])).curve(l)(e);a.current[t].attr("path",r)}))}}),[e.freshTime]),c.exports.useEffect((()=>{r.current=new i({container:"SPath",width:400,height:400}),r.current.addShape("circle",{attrs:{x:200,y:200,r:100,fill:"#f5f5f7",shadowColor:t[0],shadowBlur:10}});const e=Array.from({length:16},((e,t)=>n(4*t))),s=u().x((e=>e[0])).y((e=>e[1])).curve(l)(e);Array.from({length:4},((e,n)=>{a.current.push(r.current.addShape("path",{attrs:{stroke:t[n],lineWidth:1,path:s}}))}))}),[]),o.createElement("div",{className:"s-model"},o.createElement("div",{id:"SPath",className:"s-canvas-wrapper"}))}function E(e){const t=128,r="#e9dcf7",a=c.exports.useRef(),n=c.exports.useRef([]),s=c.exports.useRef();function d(e,t=0){const r=2.8125*e-150,a=Math.cos(r*Math.PI/180),n=Math.sin(r*Math.PI/180),s=110+t;return[200+a*s,200+n*s,a,n]}return c.exports.useEffect((()=>{if(e.data&&s.current){const r=function(e){return[...e]}(e.data).reduce(((e,t,r)=>r%8?[...e,d(r,t*t/65025*16+4)]:e),[]),a=u().x((e=>e[0])).y((e=>e[1])).curve(l)(r);s.current.attr("path",a),n.current.map(((e,r)=>{const{x:a,y:n}=s.current.getPoint(r/t);e.attr("x",a),e.attr("y",n)}))}}),[e.freshTime]),c.exports.useEffect((()=>{a.current=new i({container:"SPathDot",width:400,height:400}),a.current.addShape("circle",{attrs:{x:200,y:200,r:100,fill:"#f5f5f7",shadowColor:r,shadowBlur:10}});const e=Array.from({length:16},((e,t)=>d(8*t))),c=u().x((e=>e[0])).y((e=>e[1])).curve(l)(e);s.current=a.current.addShape("path",{attrs:{lineWidth:1,path:c}}),n.current=Array.from({length:t},((e,n)=>{const{x:c,y:i}=s.current.getPoint(n/t),[,,o,u]=d(n),l=5*o,h=5*u;return a.current.addShape("circle",{attrs:{x:c,y:i,r:1.2,fill:r,shadowColor:"#22aaff",shadowOffsetX:-l,shadowOffsetY:-h,shadowBlur:4}})}))}),[]),o.createElement("div",{className:"s-model"},o.createElement("div",{id:"SPathDot",className:"s-canvas-wrapper"}))}function w(e){const t=["#cdf5dd","#e8fdc8","#dafcf0","#f3f8c9"],r=c.exports.useRef(),a=c.exports.useRef([]);function n(e,t=0){const r=5.625*e-150,a=100+t;return[200+Math.cos(r*Math.PI/180)*a,200+Math.sin(r*Math.PI/180)*a]}return c.exports.useEffect((()=>{if(e.data){const t=[[],[],[],[]];(function(e){let t=[];return[...e].map(((e,r)=>{r%2&&t.push(e)})),p(t,5,.75)})(e.data).map(((e,r)=>{t[r%4].push(n(r,e*e/65025*30))})),t.map(((e,t)=>{const r=u().x((e=>e[0])).y((e=>e[1])).curve(l)(e);a.current[t].attr("path",r)}))}}),[e.freshTime]),c.exports.useEffect((()=>{r.current=new i({container:"SPathFill",width:400,height:400}),r.current.addShape("circle",{attrs:{x:200,y:200,r:100,fill:"#f5f5f7",shadowColor:t[0],shadowBlur:10}}).setZIndex(2);const e=Array.from({length:16},((e,t)=>n(4*t))),s=u().x((e=>e[0])).y((e=>e[1])).curve(l)(e);Array.from({length:4},((e,n)=>{a.current.push(r.current.addShape("path",{attrs:{stroke:t[n],lineWidth:1,path:s,fill:m(t[n],.4)}}).setZIndex(1))}))}),[]),o.createElement("div",{className:"s-model"},o.createElement("div",{id:"SPathFill",className:"s-canvas-wrapper"}))}function v(e){const t=200,r=200,a=100,n="#fff",s=c.exports.useRef(),u=c.exports.useRef(),l=c.exports.useRef(),[d,h]=c.exports.useState(!1);return c.exports.useEffect((()=>{var c,o;s.current||(s.current=new i({container:"SCircle",width:400,height:400}),s.current.addShape("circle",{attrs:{x:t,y:r,r:a,fill:"#f5f5f7",shadowColor:"#fcc8d9",shadowBlur:10}}),u.current=s.current.addShape("path",{attrs:{stroke:n,lineWidth:2,path:y(t,r,a)}}),u.current.animate((e=>({path:y(t,r,a+80*e),opacity:1-1*e})),{duration:6e3,easing:"easeLinear",repeat:!0}),l.current=s.current.addShape("path",{attrs:{stroke:n,lineWidth:2,path:y(t,r,a)}}),l.current.animate((e=>({path:y(t,r,a+80*e),opacity:1-1*e})),{duration:6e3,easing:"easeLinear",repeat:!0})),e.isPlaying?(null==(c=u.current)||c.resumeAnimate(),d?null==(o=l.current)||o.resumeAnimate():setTimeout((()=>{var e;null==(e=l.current)||e.resumeAnimate(),h(!0)}),3e3)):setTimeout((()=>{var e,t;null==(e=u.current)||e.pauseAnimate(),null==(t=l.current)||t.pauseAnimate()}))}),[e.isPlaying]),o.createElement("div",{className:"s-model"},o.createElement("div",{id:"SCircle",className:"s-canvas-wrapper"}))}const S=new class{constructor(e){this.options=s(s({},{size:128}),e),this.analyser=h.createAnalyser(),this.analyser.fftSize=2*this.options.size,this.gainNode=h.createGain(),this.gainNode.connect(h.destination),this.analyser.connect(this.gainNode),this.options.audioEl&&(this.audioSource=h.createMediaElementSource(this.options.audioEl),this.audioSource.connect(this.analyser)),this.visualArr=new Uint8Array(this.analyser.frequencyBinCount),this.resumeAudioContext()}resumeAudioContext(){if(h){const e=()=>{"suspended"===h.state&&h.resume(),document.removeEventListener("click",e)};document.addEventListener("click",e)}}destory(){var e;this.analyser.disconnect(this.gainNode),null==(e=this.audioSource)||e.disconnect(this.analyser),this.gainNode.disconnect(h.destination)}setAudioEl(e){this.audioSource&&this.audioSource.disconnect(this.analyser),this.audioSource=h.createMediaElementSource(e),this.audioSource.connect(this.analyser)}changeVolumn(e){this.gainNode.gain.value=e}getVisualizeValue(){return this.analyser.getByteFrequencyData(this.visualArr),this.visualArr}};function A(){const e=c.exports.useRef(null);c.exports.useEffect((()=>{S.setAudioEl(e.current)}),[]);const[t,r]=c.exports.useState(),[a,n]=c.exports.useState(),[s,i]=c.exports.useState(+new Date),[u,l]=c.exports.useState(!1);let d,h=c.exports.useRef();function p(e){d||(d=e);const t=e-d;(0===t||t>0)&&(n(S.getVisualizeValue()),i(+new Date),d=e),h.current=requestAnimationFrame(p)}return o.createElement(o.Fragment,null,o.createElement("div",{style:{display:"flex",alignItems:"center",padding:"20px"}},o.createElement("audio",{controls:!0,onPlay:function(){l(!0),h.current=requestAnimationFrame(p)},onPause:function(){l(!1),h.current&&cancelAnimationFrame(h.current)},ref:e,src:t,style:{marginRight:"10px"}}),o.createElement("input",{type:"file",onChange:function(e){const t=URL.createObjectURL(e.target.files[0]);r(t)}})),o.createElement("div",{className:f},o.createElement(x,{data:a,freshTime:s}),o.createElement(E,{data:a,freshTime:s}),o.createElement(g,{data:a,freshTime:s}),o.createElement(w,{data:a,freshTime:s}),o.createElement(v,{isPlaying:u})))}function P(){return o.createElement("div",{className:"App"},o.createElement(A,null))}d.render(o.createElement(o.StrictMode,null,o.createElement(P,null)),document.getElementById("root"));
