var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,s=(e,s)=>{for(var c in s||(s={}))r.call(s,c)&&n(e,c,s[c]);if(t)for(var c of t(s))a.call(s,c)&&n(e,c,s[c]);return e};import{r as c,C as u,R as o,l as i,c as l,a as d}from"./vendor.37d9fc5b.js";const h=new window.AudioContext;var f="_wrapper_112d7_1";function p(e,t=5,r=.8){if(t<3||t>13||t%2==0)throw new Error("num value muse be singular, num >= 3, num <= 13");return e.map(((a,n)=>{const s=(t-1)/2-n%t,c=e[n+s];return~~(c?c*r**Math.abs(s):a)}))}function m(e,t){"#"===e[0]&&(e=e.slice(1));const r=parseInt(e,16);return`rgba(${r>>16}, ${255&r}, ${r>>8&255}, ${t})`}function y(e,t,r){return`M ${e-r}, ${t}\n  a ${r}, ${r} 0 1, 0 ${2*r}, 0 \n  a ${r}, ${r} 0 1, 0 ${2*-r}, 0`}function x(e){const t="#e9dcf7",r=c.exports.useRef(),a=c.exports.useRef([]);return c.exports.useEffect((()=>{var t;if(null==(t=e.data)?void 0:t.length){(function(e){return p(e.reduce(((e,t,r)=>(r%2&&e.push(t),e)),[]),5,.6)})(e.data).map(((e,t)=>{a.current[t].attr("height",e*e/65025*50+4)}))}}),[e.data]),c.exports.useEffect((()=>{r.current=new u({container:"SLine",width:400,height:400}),r.current.addShape("circle",{attrs:{x:200,y:200,r:100,fill:"#f0f0f2",shadowColor:t,shadowBlur:10}}),a.current=Array.from({length:64},((e,a)=>{const n=5.625*a-150,s=Math.cos(n*Math.PI/180),c=Math.sin(n*Math.PI/180),u=110;return r.current.addShape("rect",{attrs:{width:4,height:4,radius:2,x:200+s*u-2,y:200+c*u-2,fill:t}}).rotateAtPoint(200+s*u,200+c*u,(n-90)*Math.PI/180)}))}),[]),o.createElement("div",{className:"s-model"},o.createElement("div",{id:"SLine",className:"s-canvas-wrapper"}))}function g(e){const t=["#e9dcf7","#cdd9f5","#cdf5dd","#f3dfbb"],r=c.exports.useRef(),a=c.exports.useRef([]);function n(e,t=0){const r=5.625*e-150,a=110+t;return[200+Math.cos(r*Math.PI/180)*a,200+Math.sin(r*Math.PI/180)*a]}return c.exports.useEffect((()=>{var t;if(null==(t=e.data)?void 0:t.length){const t=[[],[],[],[]];(function(e){let t=[];return e.map(((e,r)=>{r%2&&t.push(e)})),p(t,5,.75)})(e.data).map(((e,r)=>{t[r%4].push(n(r,e*e/65025*50+4))})),t.map(((e,t)=>{var r;const n=i().x((e=>e[0])).y((e=>e[1])).curve(l)(e);null==(r=a.current[t])||r.attr("path",n)}))}}),[e.data]),c.exports.useEffect((()=>{r.current=new u({container:"SPath",width:400,height:400}),r.current.addShape("circle",{attrs:{x:200,y:200,r:100,fill:"#f0f0f2",shadowColor:t[0],shadowBlur:10}});const e=Array.from({length:16},((e,t)=>n(4*t))),s=i().x((e=>e[0])).y((e=>e[1])).curve(l)(e);Array.from({length:4},((e,n)=>{a.current.push(r.current.addShape("path",{attrs:{stroke:t[n],lineWidth:1,path:s}}))}))}),[]),o.createElement("div",{className:"s-model"},o.createElement("div",{id:"SPath",className:"s-canvas-wrapper"}))}function v(e){const t=128,r="#e9dcf7",a=c.exports.useRef(),n=c.exports.useRef([]),s=c.exports.useRef();function d(e,t=0){const r=2.8125*e-150,a=Math.cos(r*Math.PI/180),n=Math.sin(r*Math.PI/180),s=110+t;return[200+a*s,200+n*s,a,n]}return c.exports.useEffect((()=>{var r;if((null==(r=e.data)?void 0:r.length)&&s.current){const r=e.data.reduce(((e,t,r)=>r%8?[...e,d(r,t*t/65025*16+4)]:e),[]),a=i().x((e=>e[0])).y((e=>e[1])).curve(l)(r);s.current.attr("path",a),n.current.map(((e,r)=>{const{x:a,y:n}=s.current.getPoint(r/t);e.attr("x",a),e.attr("y",n)}))}}),[e.data]),c.exports.useEffect((()=>{a.current=new u({container:"SPathDot",width:400,height:400}),a.current.addShape("circle",{attrs:{x:200,y:200,r:100,fill:"#f0f0f2",shadowColor:r,shadowBlur:10}});const e=Array.from({length:16},((e,t)=>d(8*t))),c=i().x((e=>e[0])).y((e=>e[1])).curve(l)(e);s.current=a.current.addShape("path",{attrs:{lineWidth:1,path:c}}),n.current=Array.from({length:t},((e,n)=>{const{x:c,y:u}=s.current.getPoint(n/t),[,,o,i]=d(n),l=5*o,h=5*i;return a.current.addShape("circle",{attrs:{x:c,y:u,r:1.2,fill:r,shadowColor:"#22aaff",shadowOffsetX:-l,shadowOffsetY:-h,shadowBlur:4}})}))}),[]),o.createElement("div",{className:"s-model"},o.createElement("div",{id:"SPathDot",className:"s-canvas-wrapper"}))}function E(e){const t=["#cdf5dd","#e8fdc8","#dafcf0","#f3f8c9"],r=c.exports.useRef(),a=c.exports.useRef([]);function n(e,t=0){const r=5.625*e-150,a=100+t;return[200+Math.cos(r*Math.PI/180)*a,200+Math.sin(r*Math.PI/180)*a]}return c.exports.useEffect((()=>{var t;if(null==(t=e.data)?void 0:t.length){const t=[[],[],[],[]];(function(e){let t=[];return e.map(((e,r)=>{r%2&&t.push(e)})),p(t,5,.75)})(e.data).map(((e,r)=>{t[r%4].push(n(r,e*e/65025*30))})),t.map(((e,t)=>{const r=i().x((e=>e[0])).y((e=>e[1])).curve(l)(e);a.current[t].attr("path",r)}))}}),[e.data]),c.exports.useEffect((()=>{r.current=new u({container:"SPathFill",width:400,height:400}),r.current.addShape("circle",{attrs:{x:200,y:200,r:100,fill:"#f0f0f2"}}).setZIndex(2);const e=Array.from({length:16},((e,t)=>n(4*t))),s=i().x((e=>e[0])).y((e=>e[1])).curve(l)(e);Array.from({length:4},((e,n)=>{a.current.push(r.current.addShape("path",{attrs:{stroke:t[n],lineWidth:1,path:s,fill:m(t[n],.4)}}).setZIndex(1))}))}),[]),o.createElement("div",{className:"s-model"},o.createElement("div",{id:"SPathFill",className:"s-canvas-wrapper"}))}function w(e){const t=200,r=200,a=100,n="#fff",s=c.exports.useRef(),i=c.exports.useRef([]),l=c.exports.useRef([]),d=c.exports.useRef([]),h=c.exports.useRef([]),f=c.exports.useRef([]);return c.exports.useEffect((()=>{f.current=e.data||[]}),[e.data]),c.exports.useEffect((()=>{if(!s.current){s.current=new u({container:"SCircle",width:400,height:400}),s.current.addShape("circle",{attrs:{x:t,y:r,r:a,fill:"#f0f0f2",shadowColor:"#fcc8d9",shadowBlur:10}});const c=()=>s.current.addShape("path",{attrs:{stroke:n,lineWidth:2,path:y(t,r,a),opacity:0}}),o=()=>s.current.addShape("circle",{attrs:{x:t,y:100,r:5,fill:n,shadowColor:"#e9dcf7",shadowBlur:5,opacity:0}}),f={duration:6e3,easing:"easeLinear",repeat:!0};Array.from({length:3},((n,s)=>{h.current.push(!1),i.current.push(c()),i.current[s].animate((e=>({path:y(t,r,a+80*e),opacity:e>.02&&e<.9?.8-.8*e:0})),f),l.current.push(o()),d.current.push(0),l.current[s].animate((n=>{e.data&&n<.05&&!d.current[s]?d.current[s]=~~(360*Math.random()):n>.9&&(d.current[s]=0);const c=d.current[s]+360*n-180,u=Math.cos(c*Math.PI/180),o=Math.sin(c*Math.PI/180),i=a+80*n;return{x:t+u*i,y:r+o*i,r:5*(1-n/2),opacity:n>.05&&n<.9?.8-.8*n:0}}),f)}))}if(e.isPlaying)for(let e=0;e<i.current.length;e++)h.current[e]?(i.current[e].resumeAnimate(),l.current[e].resumeAnimate()):setTimeout((()=>{i.current[e].resumeAnimate(),l.current[e].resumeAnimate(),h.current[e]=!0}),2e3*e);else setTimeout((()=>{for(let e=0;e<i.current.length;e++)i.current[e].pauseAnimate(),l.current[e].pauseAnimate()}))}),[e.isPlaying]),o.createElement("div",{className:"s-model"},o.createElement("div",{id:"SCircle",className:"s-canvas-wrapper"}))}function S(e){const t=200,r=200,a=100,n="#e9dcf7",s=c.exports.useRef(),d=c.exports.useRef(),h=c.exports.useRef([]);function f(e,a=0){const n=5.625*e-150,s=Math.cos(n*Math.PI/180),c=Math.sin(n*Math.PI/180),u=110+a;return[t+s*u,r+c*u]}return c.exports.useEffect((()=>{var t,r;if(null==(t=e.data)?void 0:t.length){const t=[],a=function(e){let t=[];return e.map(((e,r)=>{r%2&&t.push(e)})),p(t,5,.5)}(e.data);a.map(((e,r)=>{const n=f(r,e*e/65025*60),s=f(r,-e*e/65025*12);t[r]=n,t[a.length+r]=s,h.current[r].attr("x1",n[0]),h.current[r].attr("y1",n[1]),h.current[r].attr("x2",s[0]),h.current[r].attr("y2",s[1])}));const n=i().x((e=>e[0])).y((e=>e[1])).curve(l)(t);null==(r=d.current)||r.attr("path",n)}}),[e.data]),c.exports.useEffect((()=>{s.current=new u({container:"SPathDouble",width:400,height:400}),s.current.addShape("circle",{attrs:{x:t,y:r,r:a,fill:"#f0f0f2",shadowColor:n,shadowBlur:10}}),d.current=s.current.addShape("path",{attrs:{stroke:n,lineWidth:1,path:y(t,r,110)}}),h.current=Array.from({length:64},((e,r)=>s.current.addShape("line",{attrs:{x1:t,y1:100,x2:t,y2:100,stroke:n,lineWidth:1}})))}),[]),o.createElement("div",{className:"s-model"},o.createElement("div",{id:"SPathDouble",className:"s-canvas-wrapper"}))}function M(e){const t=c.exports.useRef(),r=c.exports.useRef([]),a=c.exports.useRef([]),n=c.exports.useRef([]),s=c.exports.useRef(-1),i=c.exports.useRef();return c.exports.useEffect((()=>{if(e.isPlaying&&e.data&&e.data.length){if(i.current)return;i.current=setTimeout((()=>{s.current=~~(64*Math.random()),i.current=0,clearTimeout(i.current)}),300)}}),[e.isPlaying,e.data]),c.exports.useEffect((()=>{t.current||(t.current=new u({container:"SParticle",width:400,height:400}),t.current.addShape("circle",{attrs:{x:200,y:200,r:100,fill:"#f0f0f2",shadowColor:"#fcc8d9",shadowBlur:10}}),Array.from({length:64},((e,c)=>{Array.from({length:24},((e,u)=>{const o=5.625*c-150+10*(Math.random()-.5),i=Math.cos(o*Math.PI/180),l=Math.sin(o*Math.PI/180),d=200+100*i,h=200+100*l,f=t.current.addShape("circle",{attrs:{x:d,y:h,r:.8,fill:"#fff",opacity:0}});f.animate((e=>{const t=5.625*c-150+4*Math.sin(20*e),r=Math.cos(t*Math.PI/180),a=Math.sin(t*Math.PI/180),o=64*c+u;n.current[o]&&(e<.02?n.current[o]=c>=s.current-1&&c<=s.current+1?48:18:e>.98&&(n.current[o]=18));const i=n.current[o]||18;return{x:d+r*e*i,y:h+a*e*i,opacity:1-e}}),{duration:4e3,repeat:!0,easing:"easeSinInOut"}),r.current.push(f),a.current.push(!1),n.current.push(18)}))}))),e.isPlaying?r.current.map(((e,t)=>{a.current[t]?e.resumeAnimate():setTimeout((()=>{e.resumeAnimate(),a.current[t]=!0}),4e3*Math.random())})):setTimeout((()=>{r.current.map((e=>{e.pauseAnimate()}))}))}),[e.isPlaying]),o.createElement("div",{className:"s-model"},o.createElement("div",{id:"SParticle",className:"s-canvas-wrapper"}))}const P=new class{constructor(e){this.options=s(s({},{size:128}),e),this.analyser=h.createAnalyser(),this.analyser.fftSize=2*this.options.size,this.gainNode=h.createGain(),this.gainNode.connect(h.destination),this.analyser.connect(this.gainNode),this.options.audioEl&&(this.audioSource=h.createMediaElementSource(this.options.audioEl),this.audioSource.connect(this.analyser)),this.visualArr=new Uint8Array(this.analyser.frequencyBinCount),this.resumeAudioContext()}resumeAudioContext(){if(h){const e=()=>{"suspended"===h.state&&h.resume(),document.removeEventListener("click",e)};document.addEventListener("click",e)}}destory(){var e;this.analyser.disconnect(this.gainNode),null==(e=this.audioSource)||e.disconnect(this.analyser),this.gainNode.disconnect(h.destination)}setAudioEl(e){this.audioSource&&this.audioSource.disconnect(this.analyser),this.audioSource=h.createMediaElementSource(e),this.audioSource.connect(this.analyser)}changeVolumn(e){this.gainNode.gain.value=e}getVisualizeValue(){return this.analyser.getByteFrequencyData(this.visualArr),this.visualArr}};function A(){const e=c.exports.useRef(null);c.exports.useEffect((()=>{P.setAudioEl(e.current)}),[]);const[t,r]=c.exports.useState(),[a,n]=c.exports.useState([]),[s,u]=c.exports.useState(!1);let i,l=c.exports.useRef();function d(e){i||(i=e);const t=e-i;(0===t||t>0)&&(n([...P.getVisualizeValue()]),i=e),l.current=requestAnimationFrame(d)}return o.createElement(o.Fragment,null,o.createElement("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",padding:"20px"}},o.createElement("audio",{controls:!0,onPlay:function(){u(!0),l.current=requestAnimationFrame(d)},onPause:function(){u(!1),l.current&&cancelAnimationFrame(l.current)},ref:e,src:t,style:{marginRight:"10px"}}),o.createElement("input",{type:"file",onChange:function(e){const t=URL.createObjectURL(e.target.files[0]);r(t)}})),o.createElement("div",{className:f},o.createElement(x,{data:a}),o.createElement(v,{data:a}),o.createElement(g,{data:a}),o.createElement(E,{data:a}),o.createElement(S,{data:a}),o.createElement(w,{isPlaying:s,data:a}),o.createElement(M,{isPlaying:s,data:a})))}function R(){return o.createElement("div",{className:"App"},o.createElement(A,null))}d.render(o.createElement(o.StrictMode,null,o.createElement(R,null)),document.getElementById("root"));
